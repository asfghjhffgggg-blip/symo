<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>متجر الملابس — MS Fashion</title>
<style>
:root{
  --bg:#0f1724; --card:#0b1320; --accent:#ff6b6b; --muted:#94a3b8;
  --glass: rgba(255,255,255,0.04); --radius:16px; --shadow: 0 10px 30px rgba(2,6,23,0.6);
  --glass-2: rgba(255,255,255,0.03); font-family: "Segoe UI", Tahoma, Roboto, "Helvetica Neue", Arial; --text: #e6eef8;
}
[data-theme="light"]{
  --bg: #f6f8fa; --card: #ffffff; --accent: #ff6b6b; --muted: #6b7280;
  --glass: rgba(0,0,0,0.04); --glass-2: rgba(0,0,0,0.03); --text: #071427;
  --shadow: 0 8px 24px rgba(2,6,23,0.06);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  background: linear-gradient(180deg,#071027 0%, #081426 60%);
  color:var(--text); padding:28px; line-height:1.45;
}
[data-theme="light"] body{
  background: linear-gradient(180deg,#ffffff 0%, #f3f4f6 60%);
  color:var(--text);
}
.container{max-width:1200px;margin:0 auto}
header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:28px;}
.brand{display:flex;align-items:center;gap:12px;}
.logo{width:56px;height:56px;border-radius:12px;background: conic-gradient(from 120deg at 50% 50%, #ff9a9a, #ffd6a5, #a0e9ff);box-shadow: var(--shadow);display:flex;align-items:center;justify-content:center;font-weight:700;color:#081426;}
h1{font-size:20px}
nav{display:flex;gap:12px;align-items:center}
.btn{background:linear-gradient(90deg,var(--accent),#ff8a8a);border:none;padding:10px 14px;border-radius:12px;color:#081426;cursor:pointer;font-weight:600;box-shadow: 0 6px 18px rgba(255,107,107,0.15);}
.outline{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 12px;border-radius:12px;cursor:pointer;}
.muted{color:var(--muted);font-size:13px}
.hero{display:grid;grid-template-columns:1fr 380px;gap:20px;margin-bottom:26px;align-items:stretch;}
.hero-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:var(--radius);padding:28px;box-shadow:var(--shadow);}
.hero h2{font-size:28px;margin-bottom:8px}
.categories{display:flex;gap:12px;flex-wrap:wrap;margin-top:14px}
.chip{background:var(--glass);padding:10px 12px;border-radius:999px;color:var(--muted);cursor:pointer;border:1px solid rgba(255,255,255,0.02)}
.chip.active{background:linear-gradient(90deg,var(--accent),#ff8a8a);color:#081426;font-weight:700}
.side{background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:var(--radius);padding:18px;min-height:160px;box-shadow:var(--shadow);}
.featured{display:flex;gap:12px;align-items:center;}
.thumb{width:72px;height:72px;border-radius:12px;background:linear-gradient(180deg,#fff2,#fff0);display:flex;align-items:center;justify-content:center;color:#081426;font-weight:700}
.price{font-weight:700}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:18px}
.card{background:linear-gradient(180deg,var(--card), rgba(255,255,255,0.02));border-radius:14px;padding:12px;border:1px solid var(--glass-2);transition:transform .24s ease, box-shadow .24s ease;}
.card:hover{transform:translateY(-6px);box-shadow: 0 18px 40px rgba(2,6,23,0.7)}
.product-img{height:180px;border-radius:12px;background-size:cover;background-position:center;margin-bottom:12px;box-shadow: inset 0 -20px 60px rgba(0,0,0,0.35);position:relative;}
.info{display:flex;justify-content:space-between;align-items:center;gap:8px}
.meta{color:var(--muted);font-size:13px}
.add{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:10px;color:var(--muted);cursor:pointer}
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:80}
.modal{width:100%;max-width:900px;background:linear-gradient(180deg,#071428, #061323);border-radius:16px;padding:20px;border:1px solid rgba(255,255,255,0.03);box-shadow:var(--shadow)}
.modal-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.close{background:transparent;border:0;color:var(--muted);cursor:pointer;font-size:18px}
.login-form{display:flex;flex-direction:column;gap:10px;padding:16px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border-radius:12px}
.input{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:10px;border-radius:10px;color:inherit}
.hint{font-size:13px;color:var(--muted);margin-top:6px}
.dev-panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:14px;border-radius:12px;border:1px dashed rgba(255,255,255,0.03)}
.small{font-size:13px;color:var(--muted)}
footer{margin-top:28px;color:var(--muted);font-size:13px;text-align:center}
@media (max-width:980px){.hero{grid-template-columns:1fr}.grid{grid-template-columns:repeat(2,1fr)}header{flex-direction:column;align-items:flex-start;gap:12px}}
@media (max-width:620px){.grid{grid-template-columns:1fr}}
.dev-btn{position:absolute;top:8px;right:8px;background:var(--accent);color:#081426;border:none;border-radius:8px;padding:4px 8px;font-size:12px;cursor:pointer;}
.delete-img{position:absolute;top:8px;left:8px;background:red;color:white;border:none;border-radius:8px;padding:4px 8px;font-size:12px;cursor:pointer;}
.discount-label{position:absolute;bottom:8px;right:8px;background:orange;color:#081426;border-radius:8px;padding:4px 6px;font-size:12px;}
</style>
</head>
<body>
<div class="container">
<header>
<div class="brand">
<div class="logo">MS</div>
<div>
<h1 id="brandTitle">ماركت الملابس SYMO HSOP </h1>
<div class="muted" id="brandDesc">أحدث الموديلات للرجالي والحريمي والأطفال</div>
</div>
</div>
<nav id="mainNav">
<button id="themeToggle" class="outline">تبديل الوضع</button>
<button id="langToggle" class="outline">EN</button>
<button id="openLogin" class="outline">دخول / تسجيل</button>
<button id="openCart" class="btn">سلة (0)</button>
</nav>
</header>

<section class="hero">
<div class="hero-card">
<h2 id="heroTitle">أزياء موسم اليوم</h2>
<p class="muted" id="heroDesc">تيشرتات، بناطيل، أطفالي، رجالي، حريمي — تصميم حديث وجودة عالية.</p>
<div class="categories" id="categories">
<div class="chip active" data-cat="all">الكل</div>
<div class="chip" data-cat="tshirts">تيشرتات</div>
<div class="chip" data-cat="pants">بناطيل</div>
<div class="chip" data-cat="kids">أطفالي</div>
<div class="chip" data-cat="men">رجالي</div>
<div class="chip" data-cat="women">حريمي</div>
</div>
<div style="margin-top:16px;">
<button id="shopNow" class="btn">تسوق الآن</button>
<button id="viewAll" class="outline">عرض الكل</button>
</div>
<div style="margin-top:18px" id="devHintArea"></div>
</div>

<aside class="side">
<h3>منتج مميز</h3>
<div class="featured" id="featured">
<div class="thumb" id="featThumb">T</div>
<div>
<div style="font-weight:700">تيشرت كاجوال</div>
<div class="muted">قماش ناعم، خامة عالية</div>
<div class="price">EGP 299</div>
</div>
</div>
</aside>
</section>

<section>
<div id="products" class="grid"></div>
</section>

<footer>
مصمم بجودة عالية — نسخة تجريبية. حقوق التصميم © MS Fashion
</footer>
</div>

<div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
<div class="modal" id="modal" role="document"></div>
</div>

<script>
// بيانات أولية للمنتجات
let PRODUCTS = [
{id:1,title:"تيشرت كلاسيك أبيض",cat:"tshirts",price:219,desc:"قماش قطني 100%، مريح ومناسب للصيف",img:"https://images.unsplash.com/photo-1541099649105-f69ad21f3246?auto=format&fit=crop&w=800&q=60",discount:10},
{id:2,title:"بنطلون جينز داكن",cat:"pants",price:499,desc:"جينز مقاوم للتمزق، قصة عصرية",img:"https://images.unsplash.com/photo-1562158070-7bf6b8a7a3d8?auto=format&fit=crop&w=800&q=60",discount:5},
{id:3,title:"تيشرت أطفال ملون",cat:"kids",price:179,desc:"مريح وملائم لبشرة الأطفال",img:"https://images.unsplash.com/photo-1533602173836-2c8b3f1f1a2b?auto=format&fit=crop&w=800&q=60",discount:0}
];

let state = {category: 'all', cart: [], user: null, lang: 'ar'};

const $ = (s,root=document)=>root.querySelector(s);
const $$ = (s,root=document)=>Array.from(root.querySelectorAll(s));

// تغيير الوضع
function applyThemeFromStorage(){
  const t = localStorage.getItem('ms_theme') || 'dark';
  document.documentElement.setAttribute('data-theme', t==='light'?'light':'');
  $('#themeToggle').textContent = t==='light'?'الوضع الداكن':'الوضع الفاتح';
}
$('#themeToggle').onclick = () => {
  const current = document.documentElement.getAttribute('data-theme')==='light'?'light':'dark';
  const next = current==='light'?'dark':'light';
  if(next==='light') document.documentElement.setAttribute('data-theme','light');
  else document.documentElement.removeAttribute('data-theme');
  localStorage.setItem('ms_theme', next);
  $('#themeToggle').textContent = next==='light'?'الوضع الداكن':'الوضع الفاتح';
};
applyThemeFromStorage();

// عرض المنتجات
function renderProducts(){
  const grid = $('#products'); grid.innerHTML='';
  const list = PRODUCTS.filter(p=>state.category==='all'?true:p.cat===state.category);
  list.forEach(p=>{
    const el = document.createElement('div'); el.className='card';
    el.innerHTML=`
      <div class="product-img" style="background-image:url('${p.img || ''}')">
        ${state.user && state.user.role==='dev'?`<button class="dev-btn" data-id="${p.id}">+</button>
        <button class="delete-img" data-id="${p.id}">×</button>
        <div class="discount-label" data-id="${p.id}">${p.discount?`خصم ${p.discount}%`:""}</div>`:""}
      </div>
      <div style="display:flex;flex-direction:column;gap:8px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:700">${p.title}</div>
            <div class="meta">${p.cat} • ${p.desc}</div>
          </div>
          <div style="text-align:right">
            <div style="font-weight:800">${p.price} EGP</div>
            <div class="meta">خصم ${p.discount}% عند الشراء الآن</div>
          </div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
          <button class="add" data-id="${p.id}">أضف للسلة</button>
          <button class="outline" data-view="${p.id}">عرض</button>
        </div>
      </div>
    `;
    grid.appendChild(el);
  });
}

// تغيير التصنيف
function setupCategories(){
  $('#categories').addEventListener('click',e=>{
    const chip=e.target.closest('.chip'); if(!chip) return;
    state.category = chip.dataset.cat;
    $$('.chip').forEach(c=>c.classList.remove('active'));
    chip.classList.add('active');
    renderProducts();
  });
}

// فتح تسجيل الدخول
function openLogin(){
  const modal=$('#modal');
  modal.innerHTML=`
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h3>دخول / تسجيل</h3>
      <button class="close" id="closeLogin">✕</button>
    </div>
    <div style="margin-top:12px">
      <form id="loginForm" class="login-form">
        <input type="text" id="loginUser" class="input" placeholder="اسم المستخدم" required/>
        <input type="password" id="loginPass" class="input" placeholder="كلمة المرور" required/>
        <div style="display:flex;gap:8px;margin-top:10px">
          <button type="submit" class="btn">دخول</button>
        </div>
      </form>
    </div>
  `;
  showModal();
  $('#closeLogin').onclick=hideModal;
  $('#loginForm').onsubmit=e=>{
    e.preventDefault();
    const u=$('#loginUser').value.trim();
    const p=$('#loginPass').value.trim();
    if(u==='sayed' && p==='333888'){
      state.user={email:u,role:'dev'};
      hideModal(); flashMessage('تم تسجيل الدخول كمطوّر'); updateAfterLogin();
    } else alert('بيانات خاطئة');
  };
}

// لوحة المطوّر
function openDevPanel(){
  if(!state.user||state.user.role!=='dev') return alert('لوحة المطور للمطوّرين فقط');
  const modal=$('#modal');
  modal.innerHTML=`
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h3>لوحة المطور</h3>
      <button class="close" id="closeDev">✕</button>
    </div>
    <div style="margin-top:12px">
      <form id="addProductForm" style="display:flex;flex-direction:column;gap:8px">
        <input class="input" id="pTitle" placeholder="اسم المنتج" required />
        <input class="input" id="pCat" placeholder="التصنيف" required />
        <input class="input" id="pPrice" placeholder="السعر" inputmode="numeric" required />
        <input class="input" id="pDiscount" placeholder="الخصم %" inputmode="numeric"/>
        <textarea class="input" id="pDesc" placeholder="الوصف"></textarea>
        <input type="file" id="pImage" accept="image/*" />
        <div id="pPreview" style="width:120px;height:120px;border-radius:8px;background:#111;background-size:cover;background-position:center"></div>
        <div style="display:flex;gap:8px">
          <button class="btn" type="submit">أضف المنتج</button>
          <button type="button" id="clearProducts" class="outline">مسح كل المنتجات</button>
        </div>
      </form>
    </div>
  `;
  $('#closeDev').onclick=hideModal;
  const imgInput=$('#pImage'), preview=$('#pPreview');
  imgInput.onchange=e=>{
    const file=e.target.files[0];
    if(file){
      const reader=new FileReader();
      reader.onload=ev=>preview.style.backgroundImage=`url('${ev.target.result}')`;
      reader.readAsDataURL(file);
    }
  };
  $('#addProductForm').onsubmit=e=>{
    e.preventDefault();
    const t=$('#pTitle').value.trim();
    const c=$('#pCat').value.trim();
    const pr=parseFloat($('#pPrice').value);
    const d=$('#pDesc').value.trim();
    const disc=parseFloat($('#pDiscount').value)||0;
    const img=preview.style.backgroundImage.slice(5,-2);
    const id=PRODUCTS.length?PRODUCTS[PRODUCTS.length-1].id+1:1;
    PRODUCTS.push({id,title:t,cat:c,price:pr,desc:d,img,discount:disc});
    renderProducts();
    alert('تم إضافة المنتج');
  };
  $('#clearProducts').onclick=e=>{
    if(confirm('هل تريد مسح كل المنتجات؟')){
      PRODUCTS=[]; renderProducts(); alert('تم المسح');
    }
  };
  showModal();
}

function updateAfterLogin(){
  if(state.user && state.user.role==='dev'){
    const hint=$('#devHintArea');
    hint.innerHTML=`<button class="btn" id="openDevBtn">لوحة المطور</button>`;
    $('#openDevBtn').onclick=openDevPanel;
  }
}

function showModal(){ $('#modalBackdrop').style.display='flex'; }
function hideModal(){ $('#modalBackdrop').style.display='none'; }

$('#openLogin').onclick=openLogin;
$('#modalBackdrop').onclick=e=>{if(e.target===e.currentTarget) hideModal();};
function flashMessage(msg){alert(msg);}

// إضافة للسلّة وعرض المنتجات
document.body.addEventListener('click',e=>{
  const add=e.target.closest('.add');
  if(add){
    const id=parseInt(add.dataset.id);
    const p=PRODUCTS.find(x=>x.id===id);
    if(p){state.cart.push(p);$('#openCart').textContent=`سلة (${state.cart.length})`; flashMessage(`${p.title} أضيف للسلة`);}
  }

  const view=e.target.closest('[data-view]');
  if(view){
    const id=parseInt(view.dataset.view);
    const p=PRODUCTS.find(x=>x.id===id);
    if(p){
      const modal=$('#modal');
      modal.innerHTML=`
        <div style="display:flex;justify-content:space-between;align-items:center">
          <h3>${p.title}</h3>
          <button class="close" id="closeView">✕</button>
        </div>
        <div style="margin-top:12px">
          <div style="height:300px;background-image:url('${p.img}');background-size:cover;background-position:center;border-radius:12px"></div>
          <p style="margin-top:12px">${p.desc}</p>
          <div style="font-weight:700;margin-top:8px">${p.price} EGP</div>
        </div>
      `;
      $('#closeView').onclick=hideModal;
      showModal();
    }
  }

  const devBtn=e.target.closest('.dev-btn');
  if(devBtn && state.user && state.user.role==='dev'){
    const id=parseInt(devBtn.dataset.id);
    const p=PRODUCTS.find(x=>x.id===id);
    if(p){
      const newImg=prompt('أدخل رابط الصورة الجديدة أو اختر من جهازك عبر إضافة منتج');
      if(newImg){p.img=newImg; renderProducts();}
    }
  }

  const delBtn=e.target.closest('.delete-img');
  if(delBtn && state.user && state.user.role==='dev'){
    const id=parseInt(delBtn.dataset.id);
    if(confirm('هل تريد حذف هذا المنتج؟')){
      PRODUCTS=PRODUCTS.filter(x=>x.id!==id);
      renderProducts();
    }
  }

  const discountLabel=e.target.closest('.discount-label');
  if(discountLabel && state.user && state.user.role==='dev'){
    const id=parseInt(discountLabel.dataset.id);
    const p=PRODUCTS.find(x=>x.id===id);
    const val=prompt('أدخل نسبة الخصم (%)',p.discount||0);
    if(val!==null){p.discount=parseFloat(val)||0; renderProducts();}
  }
});

// التبديل بين العربية والانجليزية
$('#langToggle').onclick=()=>{
  if(state.lang==='ar'){
    state.lang='en';
    $('#langToggle').textContent='AR';
    $('#brandTitle').textContent='MS Fashion — Clothing Market';
    $('#brandDesc').textContent='Latest styles for Men, Women & Kids';
    $('#heroTitle').textContent='Today\'s Fashion';
    $('#heroDesc').textContent='T-shirts, Pants, Kids, Men, Women — Modern design & high quality';
    $$('#categories .chip').forEach(c=>{
      const map={'all':'All','tshirts':'T-Shirts','pants':'Pants','kids':'Kids','men':'Men','women':'Women'};
      c.textContent=map[c.dataset.cat]||c.textContent;
    });
    $('#shopNow').textContent='Shop Now'; $('#viewAll').textContent='View All';
    $('#openLogin').textContent='Login / Sign';
    $('#openCart').textContent=`Cart (${state.cart.length})`;
  } else {
    state.lang='ar';
    $('#langToggle').textContent='EN';
    $('#brandTitle').textContent='ماركت الملابس — MS Fashion';
    $('#brandDesc').textContent='أحدث الموديلات للرجالي والحريمي والأطفال';
    $('#heroTitle').textContent='أزياء موسم اليوم';
    $('#heroDesc').textContent='تيشرتات، بناطيل، أطفالي، رجالي، حريمي — تصميم حديث وجودة عالية.';
    $$('#categories .chip').forEach(c=>{
      const map={'all':'الكل','tshirts':'تيشرتات','pants':'بناطيل','kids':'أطفالي','men':'رجالي','women':'حريمي'};
      c.textContent=map[c.dataset.cat]||c.textContent;
    });
    $('#shopNow').textContent='تسوق الآن'; $('#viewAll').textContent='عرض الكل';
    $('#openLogin').textContent='دخول / تسجيل';
    $('#openCart').textContent=`سلة (${state.cart.length})`;
  }
};

setupCategories(); renderProducts(); updateAfterLogin();
</script>
</body>
</html>
